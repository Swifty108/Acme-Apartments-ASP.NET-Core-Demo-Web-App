@using Microsoft.AspNetCore.Identity
@inject SignInManager<AptUser> SignInManager
@inject UserManager<AptUser> UserManager
@model IList<AptUser>

@{
    ViewData["Title"] = "Residents";
}

@{
    //todo-p: table not resp - header row not all the way
}
<partial name="_LoggedInAsPartial" />
<br />
<h1>Residents with Maintenance Requests</h1>
<hr />


<div class="container">
    @{


        if (Model.Count() != 0)
        { <table class="table fp-table">

                <thead class="thead-light">
                    <tr>
                        <th scope="col">Name</th>
                        <th scope="col"></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var user in Model)

                    {
                        // var  user = UserManager.FindByIdAsync(mRecord.AptUserId).Result;
                        <tr>
                            <td>@user.FirstName @user.LastName</td>

                            <td>
                                <a asp-controller="manageraccount" asp-action="maintenanceuser" asp-route-id="@user.Id" asp-route-fname="@user.FirstName" asp-route-lname="@user.LastName" class="fp-applylink">View</a>
                            <td>
                        </tr>
                    }
                </tbody>
            </table>
        }
        else
        {
            <h4>There are no residents with maintenance requests at this time.</h4>
        }
    }
</div>
